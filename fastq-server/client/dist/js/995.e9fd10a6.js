"use strict";(self["webpackChunkfastq_client"]=self["webpackChunkfastq_client"]||[]).push([[995],{2303:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var o=s(998),r=s(6190),c=s(4145),i=s(4886),n=s(266),a=s(9223),l=s(4324),h=s(9481),u=s(7808),d=function(){var t=this,e=t._self._c;return e(o.Z,{attrs:{id:"lock"}},[e("div",{key:t.activated,staticClass:"container h-100"},[t.activated?e("div",{staticClass:"row d-flex flex-row align-items-center justify-content-center"},[e("div",{staticClass:"col-md-5"},[e(c.Z,{attrs:{elevation:"10"}},[e(i.EB,{staticClass:"primary text-white"},[t._v(" Lock Screen For "+t._s(this.activeCounter.CounterName)+" ")]),e(i.ZB,{staticClass:"row p-4"},[e(u.Z,{staticClass:"col-md-6",attrs:{label:"Email",type:"text"},model:{value:t.counterUser.email,callback:function(e){t.$set(t.counterUser,"email",e)},expression:"counterUser.email"}}),e(u.Z,{staticClass:"col-md-6",attrs:{label:"Password",type:"password"},model:{value:t.counterUser.password,callback:function(e){t.$set(t.counterUser,"password",e)},expression:"counterUser.password"}})],1),e(i.h7,[e(r.Z,{attrs:{text:"",color:"primary text-white"},on:{click:t.counterlogin}},[e(l.Z,{attrs:{left:""}},[t._v(" mdi-lock-open-variant ")]),t._v(" Unlock ")],1)],1)],1)],1)]):t._e(),t.activated?t._e():e("div",{staticClass:"row d-flex flex-row align-items-center justify-content-center mt-5"},[e("div",{staticClass:"row col-md-8 d-flex align-items-center justify-content-center"},[e(c.Z,{staticClass:"col-md-12 h-100",attrs:{flat:""}},[e(a.Z),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 mt-5"},[e("h5",{staticClass:"h4 grey--text text-center"},[t._v("Add a New Counter")]),e("div",{staticClass:"row d-flex flex-wrap align-items-center justify-content-center"},[e(n.Z,{attrs:{cols:"12",sm:"5"}},[e("p",{staticClass:"h6 grey--text"},[t._v("Counter Number:")]),e(h.Z,{attrs:{items:t.tableData,"item-text":"counterName","item-value":"","return-object":"",label:"Select Counter",solo:""},model:{value:t.counter,callback:function(e){t.counter=e},expression:"counter"}})],1)],1),e(n.Z,{staticClass:"d-flex flex-wrap align-items-center justify-content-center",attrs:{cols:"12",sm:"12"}},[e(r.Z,{staticClass:"mr-3",attrs:{color:"primary"},on:{click:t.activateCounter}},[e(l.Z,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("Save")],1),e(r.Z,{attrs:{color:"warning"}},[e(l.Z,{attrs:{left:""}},[t._v("mdi-restore")]),t._v("Reset")],1)],1)],1)])],1)],1)])])])},m=[],p=(s(7658),s(6154)),g=s(737),f={data(){return{username:null,password:null,clientDetails:null,activated:!1,id:null,counter:null,tableData:[],activeCounter:null,counterUser:{},user:null}},methods:{getCompany(){return new Promise(((t,e)=>{this.id=this.$route.query.company,this.id&&(this.$store.commit(g.O$),p.Z.get(`/app/getCompany/${this.id}`).then((t=>{console.log("res :::::",t),this.$store.commit("SET_USER",t.data),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting company!!!")})))}))},checklicense(){return new Promise(((t,e)=>{this.$store.commit(g.O$),p.Z.get("/app/checkLicense").then((e=>{if(console.log("res:::::",e),!e.data)return this.$toast.error("license is not present, activate system!!!"),void this.$store.commit(g.wQ);t(e.data)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while checking license!!!")}))}))},checkActivation(){return new Promise(((t,e)=>{this.$store.commit(g.O$);let s={branchId:this.id,cpuId:this.clientDetails.cpuId,hardDiskId:this.clientDetails.diskId};p.Z.post("/app/checkActivation",s).then((e=>{console.log("res:::::",e),this.activated=e.data,t(e.data),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting company!!!")}))}))},invokeMainProcess(){return new Promise(((t,e)=>{this.$store.commit(g.O$),p.Z.get("http://localhost:3000/api/getClientDetails").then((e=>{console.log("res:::::",e),this.clientDetails=e.data,t(e.data),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting company!!!")}))}))},activateCounter(){return new Promise(((t,e)=>{this.$store.commit(g.O$),console.log(":::::::::::::",this.counter);let s={branchId:this.counter.branchCode,cpuId:this.clientDetails.cpuId,hardDiskId:this.clientDetails.diskId,counterId:this.counter.id};p.Z.post("/license/counteractivate",s).then((e=>{console.log("res:::::",e),t(e.data),this.checkActivation(),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting company!!!")}))}))},checkCounter(){return new Promise(((t,e)=>{this.$store.commit(g.O$),console.log(":::::::::::::",this.counter);let s={cpuId:this.clientDetails.cpuId,hardDiskId:this.clientDetails.diskId};p.Z.post("/app/checkandgetcounter",s).then((e=>{console.log("res:::::",e),t(e.data),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting active counter!!!")}))}))},GetIp(){return new Promise(((t,e)=>{this.$store.commit(g.O$),p.Z.get("http://localhost:3000/api/getServerIP").then((e=>{console.log("res:::::",e),t(e.data),this.$store.commit(g.wQ)})).catch((t=>{console.log(t.response),e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while getting server IP!!!")}))}))},getAllCounters(){this.tableData=[],this.$store.commit(g.O$),p.Z.get(`/counter/getinactivecounter/${this.$store.getters.getUser.company_code}`).then((t=>{console.log(">>>>>>>>>>>>>>>>>",t),t.data.message.forEach((t=>{let e={};e.counterNumber=t.CounterNumber,e.counterName=t.CounterName,e.branchCode=t.BranchCode,e.branchName=t.BranchName,e.date=t.CreatedAt,e.id=t.ID,this.tableData.push(e)})),this.$toast.success("counters fetched successfully.")})).catch((t=>{this.$store.commit(g.wQ),console.log(t.response),this.$toast.error("error occured while getting counters!!!")}))},counterlogin(){return new Promise(((t,e)=>{this.$store.commit(g.O$),p.Z.post("/counter/auth",this.counterUser).then((e=>{console.log("res:::::",e),this.user=e.data,this.$store.commit("SET_ACTIVE_USER",this.user),t(e.data),this.$toast.success("Logged In !!!"),this.$router.push("/teller/teller-screen"),this.$store.commit(g.wQ)})).catch((t=>{e(t.response),this.$store.commit(g.wQ),this.$toast.error("error occured while authenticating counter!!!")}))}))}},created(){this.$store.commit(g.O$),this.getCompany(),this.getAllCounters(),this.invokeMainProcess().then((t=>{this.checklicense().then((t=>{this.checkActivation().then((t=>{this.activated=t,this.checkCounter().then((t=>{this.activeCounter=t,this.$store.commit("SET_ACTIVE_COUNTER",this.activeCounter)}))})).catch((t=>{this.$toast.error("error occured while checking activation!!!")}))})).catch((t=>{this.$toast.error("error occured while checking license!!!")}))})).catch((t=>{this.$toast.error("error occured while getting client details!!")}))}},$=f,w=s(1001),v=(0,w.Z)($,d,m,!1,null,"7bf7aef0",null),C=v.exports},1884:function(){},266:function(t,e,s){s(7658),s(1884);var o=s(144),r=s(1767),c=s(5352);const i=["sm","md","lg","xl"],n=(()=>i.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),a=(()=>i.reduce(((t,e)=>(t["offset"+(0,c.jC)(e)]={type:[String,Number],default:null},t)),{}))(),l=(()=>i.reduce(((t,e)=>(t["order"+(0,c.jC)(e)]={type:[String,Number],default:null},t)),{}))(),h={col:Object.keys(n),offset:Object.keys(a),order:Object.keys(l)};function u(t,e,s){let o=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");o+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(o+=`-${s}`,o.toLowerCase()):o.toLowerCase()}}const d=new Map;e.Z=o["default"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...n,offset:{type:[String,Number],default:null},...a,order:{type:[String,Number],default:null},...l,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:o,parent:c}){let i="";for(const r in e)i+=String(e[r]);let n=d.get(i);if(!n){let t;for(t in n=[],h)h[t].forEach((s=>{const o=e[s],r=u(t,s,o);r&&n.push(r)}));const s=n.some((t=>t.startsWith("col-")));n.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),d.set(i,n)}return t(e.tag,(0,r.ZP)(s,{class:n}),o)}})}}]);
//# sourceMappingURL=995.e9fd10a6.js.map